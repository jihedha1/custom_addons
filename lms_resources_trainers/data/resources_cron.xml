<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Cron pour vérifier les expirations de documents -->
        <record id="cron_check_document_expiry" model="ir.cron">
            <field name="name">Vérification expiration documents formateurs</field>
            <field name="model_id" ref="model_lms_resources_trainers_trainer_document"/>
            <field name="state">code</field>
            <field name="code">model._cron_check_document_expiry()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="active" eval="True"/>
        </record>

        <!-- ✅ CORRIGÉ : Utiliser res.partner au lieu de trainer_profile -->
        <record id="cron_clean_inactive_trainers" model="ir.cron">
            <field name="name">Nettoyage formateurs inactifs</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="state">code</field>
            <field name="code">model._cron_clean_inactive_trainers()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">months</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="active" eval="True"/>
        </record>

        <!-- ✅ SUPPRIMÉ : Notifications avant formation (redondant avec lms_public_info) -->

        <!-- ✅ AJOUT : Vérifier réservations actives -->
        <record id="cron_check_active_bookings" model="ir.cron">
            <field name="name">Mise à jour statut réservations</field>
            <field name="model_id" ref="model_lms_resources_trainers_resource_booking"/>
            <field name="state">code</field>
            <field name="code">model._cron_check_active_bookings()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">hours</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="active" eval="True"/>
        </record>

        <!-- ✅ AJOUT : Vérifier évaluations en retard -->
        <record id="cron_check_overdue_evaluations" model="ir.cron">
            <field name="name">Vérification évaluations en retard</field>
            <field name="model_id" ref="model_lms_resources_trainers_material_evaluation"/>
            <field name="state">code</field>
            <field name="code">model._cron_check_overdue_evaluations()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="active" eval="True"/>
        </record>
    </data>
</odoo>